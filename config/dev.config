[
  { kernel,
    [
     {inet_dist_use_interface, {127,0,0,1}}
    ]
  },

  { aehttp, [
      {external, [
          {acceptors, 10},
          {port, 3013}
          ]},
      {internal, [
          {acceptors, 10},
          {port, 3113},
          {debug_endpoints, true}
          ]},
      {channel, [
          {websocket, [ {port, 3014},
                        {handlers, 100},
                        {listen_address, <<"0.0.0.0">>}
                      ]}
          ]}
  ]},

  {aecore, [
      {peers, []},
      {peer_password, <<"secret">>},
      {db_path, "."},
      {persist, false},
      {aec_pow_cuckoo, {29, [{<<"mean29-generic">>, <<"-t 1">>, false, 1, undefined, <<"aecuckoo">>}]}},

      {lager_file_handlers, [
          {sinks, [
               {lager_event, [
                 {handlers, [
                   {lager_file_backend, [
                      %% No `{file, "..."}`.
                      {level, debug},
                      {size, 4194303}, {date, "$D0"}, {count, 10}
                   ]}
                 ]}
               ]},
               {epoch_mining_lager_event, [
                 {handlers, [
                   {lager_file_backend, [
                      %% No `{file, "..."}`.
                      {level, info},
                      {size, 4194303}, {date, "$D0"}, {count, 3}
                   ]}
                 ]}
               ]},
               {epoch_pow_cuckoo_lager_event, [
                 {handlers, [
                   {lager_file_backend, [
                      %% No `{file, "..."}`.
                      {level, debug},
                      {size, 4194303}, {date, "$D0"}, {count, 3}
                   ]}
                 ]}
               ]},
               {epoch_metrics_lager_event, [
                 {handlers, [
                   {lager_file_backend, [
                      %% No `{file, "..."}`.
                      {level, info},
                      {size, 4194303}, {date, "$D0"}, {count, 3},
                      {formatter, lager_default_formatter},
                      {formatter_config, [time, " ", message, "\n"]}
                   ]}
                 ]}
               ]},
               {epoch_sync_lager_event, [
                 {handlers, [
                    {lager_file_backend, [
                      %% No `{file, "..."}`.
                      {level, debug},
                      {size, 4194303}, {date, "$D0"}, {count, 3}
                   ]}
                 ]}
               ]}
          ]}
      ]}
    ]
  },

  {jobs,
   [{queues,
     [{sync_ping_workers, [{regulators, [{counter, [{limit, 3}]}]}]},
      {sync_task_workers, [{regulators, [{counter, [{limit, 10}]}]}]},
      {sync_gossip_workers, [{regulators, [{counter, [{limit, 10}]}]}]}
     ]}
   ]},

  {lager, [
      {error_logger_flush_queue, false},
      {handlers, [
          {lager_console_backend, [{level, info}]}
      ]},
      {extra_sinks, [
           {epoch_mining_lager_event, [
             {handlers, [
             ]}
           ]},
           {epoch_pow_cuckoo_lager_event, [
             {handlers, [
             ]}
           ]},
           {epoch_metrics_lager_event, [
             {handlers, [
             ]}
           ]},
           {epoch_sync_lager_event, [
             {handlers, [
                {lager_console_backend, [{level, info}]}
             ]}
           ]}
      ]}
  ]},

  {sasl, [
    {sasl_error_logger, false}
  ]},

  {mnesia, [{dir, "data/mnesia"}]},

  {setup, [
           {abort_on_error, true},
           {data_dir, "data"},
           {log_dir, "log"}
          ]}
].
